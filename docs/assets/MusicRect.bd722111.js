import{m as I,A as P}from"./circles.e66ef98a.js";import{r as B,R as N,c as C,A as D,g as V}from"./math.857d3662.js";import{_ as b,r,b as E,o as F,c as H,h as W,d,k as g,p as $,j}from"./index.1bc9b3fd.js";const q=s=>($("data-v-f0d5c524"),s=s(),j(),s),z={class:"con"},O=g(" \u795E\u5723\u7684\u5C4E Your suck browser does not support the "),T=q(()=>d("code",null,"audio",-1)),Y=g(" element. "),G=[O,T,Y],J=["width","height"],K={__name:"MusicRect",setup(s){let _=null,c=null;const o=r(),h=r(),n=r(window.innerWidth-220),i=r(window.innerHeight-50),f=512,u=f/2,y=2,p=1,v=[];let l=1,w=300;E(()=>{o.value.src=I,c=h.value.getContext("2d"),x(c)});function x(e){e.translate(n.value,i.value),e.rotate(Math.PI);const t=(n.value-p*(u-1))/u;for(let a=0;a<u;a++){let k=(t+p)*a;const A=B(C),M=new N(e,k,0,t,0,A);v.push(M)}}function m(){l<360?l++:l=1,c.fillStyle="#2d3436",c.fillRect(0,0,n.value,i.value);let e=_.getAudioData();w=V(e),v.forEach((t,a)=>{t.height=e[a]*y,t.fillStyle=`hsl(${l},${e[a]/w*100+"%"},50%)`,t.draw()}),window.requestAnimationFrame(m)}function R(){o.value.play(),_=new D(o.value,f),m()}function S(){o.value.pause()}return(e,t)=>(F(),H("div",z,[W(P,{class:"audioControl",showStop:!1,showForward:!1,showBackward:!1,onPlay:R,onPause:S}),d("audio",{ref_key:"audio",ref:o,crossOrigin:"anonymous"},G,512),d("canvas",{ref_key:"canvas",ref:h,width:n.value,height:i.value},null,8,J)]))}};var X=b(K,[["__scopeId","data-v-f0d5c524"]]);export{X as default};
