var p=Object.defineProperty;var f=(l,t,e)=>t in l?p(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var s=(l,t,e)=>(f(l,typeof t!="symbol"?t+"":t,e),e);import{_,r,b as v,o as h,c as d,d as c,F as u,e as y,t as m}from"./index.e02e202f.js";class g{constructor(t,e,a,i,o,n){s(this,"isDown",!1);s(this,"con",null);s(this,"dataKey","");s(this,"start",[]);s(this,"end",[]);s(this,"area",null);s(this,"selectData",[]);s(this,"conX",0);s(this,"conY",0);s(this,"mousedownCallback",()=>{});s(this,"selectCallback",()=>{});s(this,"mouseupCallback",()=>{});this.con=t,this.con.style.position="relative",this.selectItem=e,this.dataKey=a,i&&(this.mousedownCallback=i),o&&(this.selectCallback=o),n&&(this.mouseupCallback=n),this.mousedown(),this.mousemove(),this.mouseup(),this.initConData()}initConData(){let{x:t,y:e}=this.con.getBoundingClientRect();this.conX=t,this.conY=e}mousedown(){this.con.addEventListener("mousedown",t=>{this.isDown=!0,console.log("mousedown"),this.start=[t.clientX-this.conX,t.clientY-this.conY],this.createArea(),this.mousedownCallback()})}mousemove(){this.con.addEventListener("mousemove",t=>{!this.isDown||(console.log("mousemove"),this.end=[t.clientX-this.conX,t.clientY-this.conY],this.updateArea(),this.select())})}mouseup(){this.con.addEventListener("mouseup",()=>{this.isDown=!1,console.log("mouseup"),this.removeArea(),this.mouseupCallback()})}createArea(){this.area||(this.area=document.createElement("div")),this.area.style.position="absolute",this.area.style.border="1px solid rgb(0,119,255)",this.area.style.background="rgba(0,119,255,0.2)",this.con.appendChild(this.area)}removeArea(){this.area.remove()}updateArea(){let t=Math.min(this.start[0],this.end[0]),e=Math.min(this.start[1],this.end[1]),a=Math.abs(this.end[0]-this.start[0]),i=Math.abs(this.end[1]-this.start[1]);this.area.style.left=`${t}px`,this.area.style.top=`${e}px`,this.area.style.width=`${a}px`,this.area.style.height=`${i}px`}validIntersection(t,e){let a=[t.left,t.top],i=[t.right,t.bottom],o=[e.left,e.top],n=[e.right,e.bottom];return i[1]>o[1]&&a[1]<n[1]&&i[0]>o[0]&&a[0]<n[0]}select(){let t=this.area.getBoundingClientRect();this.selectData=[],this.selectItem.forEach(e=>{let a=e.getBoundingClientRect();this.validIntersection(t,a)?(this.selectData.push(e.dataset[this.dataKey]),e.style.background="#6c5ce7",e.style.color="#fff"):(e.style.background="#fff",e.style.color="#000")}),this.selectCallback()}}const b=["data-id"],D={class:"selectData"},k={__name:"SelectArea",setup(l){const t=r(),e=r("[]");return v(()=>{let a=t.value,i=document.querySelectorAll(".con .item");const o=new g(a,i,"id",()=>{e.value=""},()=>{e.value=`[ ${o.selectData.join(", ")} ]`})}),(a,i)=>(h(),d(u,null,[c("div",{class:"con",ref_key:"con",ref:t},[(h(),d(u,null,y(66,o=>c("div",{class:"item",key:o,"data-id":o},m(o),9,b)),64))],512),c("div",D," selectData:"+m(e.value),1)],64))}};var x=_(k,[["__scopeId","data-v-7920cfd9"]]);export{x as default};
