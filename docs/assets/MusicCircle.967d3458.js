var I=Object.defineProperty;var B=(t,e,a)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var p=(t,e,a)=>(B(t,typeof e!="symbol"?e+"":e,a),a);import{m as P,A as D}from"./circles.7f736bf7.js";import{_ as N,r as u,b as q,o as E,c as F,h as V,d as _,k as v,p as H,j as W}from"./index.d12433c7.js";class j{constructor(e,a=512){p(this,"dataArray",[]);if(this.analyser)return;const n=window.AudioContext||window.webkitAudioContext,o=new n,s=o.createAnalyser();s.fftSize=a,o.createMediaElementSource(e).connect(s),s.connect(o.destination);const r=s.frequencyBinCount;this.analyser=s,this.dataArray=new Uint8Array(r)}getAudioData(){return this.analyser.getByteFrequencyData(this.dataArray),this.dataArray}}class z{constructor(e,a,n,o,s,c=0,r=Math.PI*2,h=!0){this.ctx=e,this.x=a,this.y=n,this.r=o,this.fillStyle=s,this.startAngle=c,this.endAngle=r,this.anticlockwise=h,this.isGrow=!1,this.draw()}draw(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,this.startAngle,this.endAngle,this.anticlockwise),this.ctx.fillStyle=this.fillStyle,this.ctx.fill()}}const G=["#55efc4","#81ecec","#74b9ff","#a29bfe","#ffeaa7","#fab1a0","#ff7675","#fd79a8"];function d(...t){if(t.length===2)return parseInt(Math.random()*(t[1]-t[0])+t[0]);if(t.length===1){const e=t[0].length;return t[0][parseInt(Math.random()*e)]}}const L=t=>(H("data-v-e3563dc8"),t=t(),W(),t),O={class:"con"},R=v(" \u795E\u5723\u7684\u5C4E Your suck browser does not support the "),T=L(()=>_("code",null,"audio",-1)),U=v(" element. "),Y=[R,T,U],J=["width","height"],K={__name:"MusicCircle",setup(t){let e=null,a=null;const n=u(),o=u(),s=u(window.innerWidth-220),c=u(window.innerHeight-50),r=256,h=10,x=50,A=.3,w=[];q(()=>{n.value.src=P,a=o.value.getContext("2d"),m(a)});function m(l){for(let i=0;i<r;i++){const f=d(h,x),k=d(0,s.value),S=d(0,c.value),M=d(G),b=new z(l,k,S,f,M);w.push(b)}}function y(){a.fillStyle="#2d3436",a.fillRect(0,0,s.value,c.value);let l=e.getAudioData();w.forEach((i,f)=>{i.r=l[f]*A,i.draw()}),window.requestAnimationFrame(y)}function C(){n.value.play(),e=new j(n.value),y()}function g(){n.value.pause()}return(l,i)=>(E(),F("div",O,[V(D,{class:"audioControl",showStop:!1,showForward:!1,showBackward:!1,onPlay:C,onPause:g}),_("audio",{ref_key:"audio",ref:n,crossOrigin:"anonymous"},Y,512),_("canvas",{ref_key:"canvas",ref:o,width:s.value,height:c.value},null,8,J)]))}};var $=N(K,[["__scopeId","data-v-e3563dc8"]]);export{$ as default};
