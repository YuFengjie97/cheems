import{m as b,A as I}from"./audio1.9c7a2142.js";import{r as P,R as B,A as N,a as C}from"./math.d1a4c968.js";import{_ as D,r as u,b as V,o as E,c as F,h as H,d,n as y,p as W,j as $}from"./index.0dba685e.js";const j=["#55efc4","#81ecec","#74b9ff","#a29bfe","#ffeaa7","#fab1a0","#ff7675","#fd79a8"];const q=s=>(W("data-v-38acac30"),s=s(),$(),s),z={class:"con"},O=y(" \u795E\u5723\u7684\u5C4E Your suck browser does not support the "),T=q(()=>d("code",null,"audio",-1)),Y=y(" element. "),G=[O,T,Y],J=["width","height"],K={__name:"MusicRect",setup(s){let f=null,c=null;const o=u(),_=u(),n=u(window.innerWidth-220),l=u(window.innerHeight-50),h=512,i=h/2,g=l.value/255,p=1,v=[];let r=1,w=300;V(()=>{o.value.src=b,c=_.value.getContext("2d"),S(c)});function S(e){e.translate(n.value,l.value),e.rotate(Math.PI);const a=(n.value-p*(i-1))/i;for(let t=0;t<i;t++){let A=(a+p)*t;const M=P(j),k=new B(e,A,0,a,0,M);v.push(k)}}function m(){r<360?r++:r=1,c.fillStyle="#2d3436",c.fillRect(0,0,n.value,l.value);let e=f.getAudioData();w=C(e),e.reverse(),v.forEach((a,t)=>{a.height=e[t]*g,a.fillStyle=`hsl(${e[t]%r},${e[t]/w*100+"%"},50%)`,a.draw()}),window.requestAnimationFrame(m)}function x(){o.value.play(),f=new N(o.value,h),m()}function R(){o.value.pause()}return(e,a)=>(E(),F("div",z,[H(I,{class:"audioControl",showStop:!1,showForward:!1,showBackward:!1,onPlay:x,onPause:R}),d("audio",{ref_key:"audio",ref:o,crossOrigin:"anonymous"},G,512),d("canvas",{ref_key:"canvas",ref:_,width:n.value,height:l.value},null,8,J)]))}};var X=D(K,[["__scopeId","data-v-38acac30"]]);export{X as default};
